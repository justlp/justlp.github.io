<html>
<head>
    <script>
        function log(message)
        {
            var item = document.createElement("li");
            item.appendChild(document.createTextNode(message));
            document.getElementById("console").appendChild(item);
        }
    </script>
</head>
<body>
<ul id=console>
</ul>
<!--<link id="firstPrerender" rel=prerender href="https://giphy.com/"/>-->
<!--<link id="secondPrerender" rel=prerender href="http://justlp.github.io/index3.html"/>-->
<p id="emptyParagraph"></p>
<input type="text" id="inp">
<span id="test" style="display: inline-block; padding: 2px 10px; background:#00c6f9; border-radius: 5px; color:#fff; cursor: pointer; font-family: Arial;">submit</span>
<a id="link"></a>
<!--<a href="http://justlp.github.io/index3.html">http://justlp.github.io/index3.html</a>-->
<script>
    
//    var secondPrerender = document.getElementById('secondPrerender');
    function removeFirstPrerender()
    {
        var link = document.getElementById('firstPrerender');
        link.parentElement.removeChild(link);
    }
    function removeSecondPrerender()
    {
        var link = document.getElementById('firstPrerender');
        link.parentElement.removeChild(link);
    }
    function removeThirdPrerender()
    {
        var link = document.getElementById('thirdPrerender');
        link.parentElement.removeChild(link);
    }
    
//    secondPrerender.addEventListener('webkitprerenderstart', function() { log("second_webkitprerenderstart"); }, false);
//    secondPrerender.addEventListener('webkitprerenderstop', function() { log("second_webkitprerenderstop"); }, false);
//    secondPrerender.addEventListener('webkitprerenderload', function() { log("second_webkitprerenderload"); }, false);
//    secondPrerender.addEventListener('webkitprerenderdomcontentloaded', function() { log("second_webkitprerenderdomcontentloaded"); }, false);

    function add_link(id, url, rel) {
        var link = document.getElementById(rel) || document.createElement('link');
        link.id = id;
        link.rel = rel;
        link.href = url;
        document.body.appendChild(link);
    }

    document.getElementById('test').addEventListener('click', function () {
        var url = document.getElementById('inp').value;
        var link = document.getElementById('link')
        link.innerText = url;
        link.setAttribute('href', url)

        add_link('firstPrerender', url, 'prerender');

        console.log('added prerender')
        setTimeout(function () {
            var firstPrerender = document.getElementById('firstPrerender');
            console.log('started prerender listening')
            firstPrerender.addEventListener('webkitprerenderstart', function() { log("first_webkitprerenderstart"); }, false);
            firstPrerender.addEventListener('webkitprerenderstop', function() { log("first_webkitprerenderstop"); }, false);
            firstPrerender.addEventListener('webkitprerenderload', function() { log("first_webkitprerenderload"); }, false);
            firstPrerender.addEventListener('webkitprerenderdomcontentloaded', function() { log("first_webkitprerenderdomcontentloaded"); }, false);
        }, 500)
        
    })
</script>
</body>
</html>